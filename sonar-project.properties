# SonarQube Project Configuration
# Dead Code Detection and Code Quality Settings
# SSDF Practices: PW.6.1, PW.7.1, PO.3.2

# Project identification (will be overridden by CI/CD)
sonar.projectKey=gitea-devsecops-platform
sonar.projectName=Gitea DevSecOps Platform
sonar.projectVersion=1.0

# Source code paths
sonar.sources=.
sonar.tests=tests

# Exclusions
sonar.exclusions=\
  **/tests/**,\
  **/test_*.py,\
  **/__pycache__/**,\
  **/node_modules/**,\
  **/.venv/**,\
  **/venv/**,\
  **/build/**,\
  **/dist/**,\
  **/*.min.js,\
  **/vendor/**

# Test exclusions
sonar.test.exclusions=\
  **/tests/**,\
  **/test_*.py

# Coverage report paths
sonar.python.coverage.reportPaths=coverage.xml
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# ============================================================================
# DEAD CODE DETECTION RULES
# ============================================================================

# Python Dead Code Rules
# S1481: Unused local variables should be removed
# S1144: Unused "private" methods should be removed
# S1172: Unused function parameters should be removed

sonar.issue.enforce.multicriteria=dc1,dc2,dc3,dc4,dc5,dc6

# Python - Unused variables (BLOCKER)
sonar.issue.enforce.multicriteria.dc1.ruleKey=python:S1481
sonar.issue.enforce.multicriteria.dc1.resourceKey=**/*.py

# Python - Unused private methods (CRITICAL)
sonar.issue.enforce.multicriteria.dc2.ruleKey=python:S1144
sonar.issue.enforce.multicriteria.dc2.resourceKey=**/*.py

# Python - Unused imports (MAJOR)
sonar.issue.enforce.multicriteria.dc3.ruleKey=python:S1128
sonar.issue.enforce.multicriteria.dc3.resourceKey=**/*.py

# JavaScript - Unused variables (BLOCKER)
sonar.issue.enforce.multicriteria.dc4.ruleKey=javascript:S1481
sonar.issue.enforce.multicriteria.dc4.resourceKey=**/*.js

# JavaScript - Unused function parameters (MAJOR)
sonar.issue.enforce.multicriteria.dc5.ruleKey=javascript:S1172
sonar.issue.enforce.multicriteria.dc5.resourceKey=**/*.js

# Common - Unreachable code (BLOCKER)
sonar.issue.enforce.multicriteria.dc6.ruleKey=*:S1763
sonar.issue.enforce.multicriteria.dc6.resourceKey=**/*

# ============================================================================
# QUALITY GATE SETTINGS
# ============================================================================

# Quality gate enforcement
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# Coverage thresholds
sonar.coverage.exclusions=**/tests/**,**/test_*.py

# Code smell thresholds
sonar.codeSmellThreshold=20

# Maintainability rating threshold
sonar.maintainability.rating=A

# Technical debt ratio threshold
sonar.technicalDebt.threshold=5%

# ============================================================================
# LANGUAGE-SPECIFIC SETTINGS
# ============================================================================

# Python settings
sonar.python.version=3.8,3.9,3.10,3.11,3.12
sonar.python.xunit.reportPath=test-results.xml

# JavaScript settings
sonar.javascript.file.suffixes=.js
sonar.javascript.environments=browser,node,jquery

# ============================================================================
# SECURITY RULES
# ============================================================================

# Enable security hotspot detection
sonar.security.hotspots.enabled=true

# Scan for secrets and credentials
sonar.cpd.exclusions=**/tests/**

# ============================================================================
# ANALYSIS SETTINGS
# ============================================================================

# Encoding
sonar.sourceEncoding=UTF-8

# SCM (Git) provider
sonar.scm.provider=git

# Branch analysis
sonar.branch.autoconfig.disabled=false

# Pull request decoration
sonar.pullrequest.github.endpoint=https://api.github.com
sonar.pullrequest.provider=github

# Verbose output for debugging
#sonar.verbose=true

# Analysis timeout (in seconds)
sonar.analysis.timeout=600
