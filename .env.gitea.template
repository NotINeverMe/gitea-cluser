# Gitea Container Configuration
# Copy this to .env.gitea and customize for your environment

# ============================================================================
# GITEA SERVER CONFIGURATION
# ============================================================================

# Domain and URL configuration
GITEA_DOMAIN=git.yourdomain.com
GITEA_ROOT_URL=https://git.yourdomain.com/

# Port configuration (external)
GITEA_HTTP_PORT=3000
GITEA_SSH_PORT=2222
GITEA_HTTPS_PORT=443
GITEA_HTTP_REDIRECT_PORT=80

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

POSTGRES_GITEA_PASSWORD=ChangeMe_SecurePasswordForGiteaDB_RandomString123!

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# IMPORTANT: Generate these with:
# openssl rand -hex 32

GITEA_SECRET_KEY=CHANGE_ME_TO_64_CHARACTER_RANDOM_HEX_STRING_FOR_ENCRYPTION
GITEA_INTERNAL_TOKEN=CHANGE_ME_TO_RANDOM_HEX_STRING_FOR_INTERNAL_API_AUTH
GITEA_OAUTH2_JWT_SECRET=CHANGE_ME_TO_RANDOM_HEX_STRING_FOR_JWT_SIGNING
GITEA_METRICS_TOKEN=CHANGE_ME_TO_RANDOM_STRING_FOR_PROMETHEUS_METRICS

# Admin account (created on first startup)
GITEA_ADMIN_USER=admin
GITEA_ADMIN_PASSWORD=ChangeMe_SecureAdminPassword123!
GITEA_ADMIN_EMAIL=admin@yourdomain.com

# Registration settings
GITEA_DISABLE_REGISTRATION=false  # Set to true in production

# Cookie security
GITEA_COOKIE_SECURE=true  # Set to true when using HTTPS
GITEA_WEBHOOK_SKIP_TLS=false  # Set to true for self-signed certs (dev only)

# ============================================================================
# GITEA ACTIONS RUNNER CONFIGURATION
# ============================================================================

# Generate runner token from Gitea UI:
# Admin Panel → Actions → Runners → Create Registration Token
GITEA_RUNNER_TOKEN=YOUR_RUNNER_REGISTRATION_TOKEN_HERE

# ============================================================================
# INTEGRATION TOKENS
# ============================================================================

# n8n webhook integration
N8N_WEBHOOK_URL=https://n8n.yourdomain.com/webhook/security-events
N8N_API_KEY=CHANGE_ME_TO_RANDOM_API_KEY

# Atlantis webhook
ATLANTIS_URL=https://atlantis.yourdomain.com
ATLANTIS_WEBHOOK_SECRET=CHANGE_ME_TO_RANDOM_WEBHOOK_SECRET

# SonarQube
SONARQUBE_URL=http://sonarqube:9000
SONARQUBE_TOKEN=GENERATE_FROM_SONARQUBE_UI

# ============================================================================
# GCP CONFIGURATION (for evidence collection)
# ============================================================================

GCP_PROJECT_ID=your-gcp-project-id
GCS_EVIDENCE_BUCKET=gs://compliance-evidence-your-org
GCS_MANIFEST_BUCKET=gs://compliance-manifests-your-org

# ============================================================================
# GOOGLE CHAT WEBHOOKS
# ============================================================================

GCHAT_SECURITY_WEBHOOK=https://chat.googleapis.com/v1/spaces/SPACE_ID/messages?key=KEY
GCHAT_DEV_WEBHOOK=https://chat.googleapis.com/v1/spaces/SPACE_ID/messages?key=KEY

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================

BACKUP_RETENTION_DAYS=90
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================

PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true

# ============================================================================
# RESOURCE LIMITS (optional tuning)
# ============================================================================

# Uncomment to override default resource limits
# GITEA_CPU_LIMIT=4
# GITEA_MEM_LIMIT=4G
# POSTGRES_CPU_LIMIT=2
# POSTGRES_MEM_LIMIT=2G
# RUNNER_CPU_LIMIT=4
# RUNNER_MEM_LIMIT=8G
